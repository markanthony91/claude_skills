{"createdAt":"2025-05-06T18:56:25.880Z","updatedAt":"2025-05-07T13:52:09.000Z","id":"WEVQDvDib9HoMhQL","name":"CSL MCP Server","active":false,"isArchived":false,"nodes":[{"parameters":{"path":"dc8aa568-5b10-4b59-b60a-9f39c42f1cd7"},"type":"@n8n/n8n-nodes-langchain.mcpTrigger","typeVersion":1,"position":[-60,0],"id":"91a06051-6ace-4340-9811-78c8b6eb0137","name":"MCP Server Trigger","webhookId":"dc8aa568-5b10-4b59-b60a-9f39c42f1cd7"},{"parameters":{"descriptionType":"manual","toolDescription":"Use this tool to fetch all available documents, including the table schema if the file is a CSV or Excel file.","operation":"select","schema":{"__rl":true,"mode":"list","value":"public"},"table":{"__rl":true,"value":"document_metadata_cls_cobranca","mode":"list","cachedResultName":"document_metadata_cls_cobranca"},"returnAll":true,"options":{}},"type":"n8n-nodes-base.postgresTool","typeVersion":2.5,"position":[-460,500],"id":"d89e037a-a219-4dae-baba-b3de89cb9f2b","name":"List Documents","credentials":{"postgres":{"id":"VZZGMlUmBWy1yhIa","name":"Postgres account"}}},{"parameters":{"descriptionType":"manual","toolDescription":"Run a SQL query - use this to query from the document_rows_cls_cobranca table once you know the file ID you are querying. dataset_id is the file_id and you are always using the row_data for filtering, which is a jsonb field that has all the keys from the file schema given in the document_metadata_cls_cobranca table.\n\nExample query:\n\nSELECT AVG((row_data->>'revenue')::numeric)\nFROM document_rows_cls_cobranca\nWHERE dataset_id = '123';\n\nExample query 2:\n\nSELECT \n    row_data->>'category' as category,\n    SUM((row_data->>'sales')::numeric) as total_sales\nFROM dataset_rows_cls_cobranca\nWHERE dataset_id = '123'\nGROUP BY row_data->>'category';\n","operation":"executeQuery","query":"{{ $fromAI('sql_query') }}","options":{}},"type":"n8n-nodes-base.postgresTool","typeVersion":2.5,"position":[-280,500],"id":"5711a74d-19ed-4300-91db-37ab90b4c8e0","name":"Query Document Rows","credentials":{"postgres":{"id":"VZZGMlUmBWy1yhIa","name":"Postgres account"}}},{"parameters":{"options":{}},"type":"n8n-nodes-base.gmailTool","typeVersion":2.1,"position":[480,480],"id":"75c516e6-7a3f-4458-bc9b-a919dc154a42","name":"Gmail","webhookId":"311b427e-55a5-4766-bf8b-9e3a618c6d25","credentials":{"gmailOAuth2":{"id":"8SOLaAOXoXTRVoyl","name":"Gmail account"}}},{"parameters":{"language":"python"},"type":"@n8n/n8n-nodes-langchain.toolCode","typeVersion":1.2,"position":[320,480],"id":"954b4201-8ab2-46f5-801d-5194e2666a77","name":"SMS"},{"parameters":{"content":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n## DataBase Search","height":300,"width":420},"type":"n8n-nodes-base.stickyNote","position":[-540,420],"typeVersion":1,"id":"24ffd88a-f9fa-42b2-89fc-2f55eb50ccac","name":"Sticky Note2"},{"parameters":{},"type":"n8n-nodes-base.whatsAppTool","typeVersion":1,"position":[640,480],"id":"817f5dcd-1dda-4cf4-b80a-a8b73682de10","name":"WhatsApp","webhookId":"04d94328-afa5-48b5-a276-74b7b4880010"},{"parameters":{"content":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n## Agent OutPUT\n**Acesse o modelo \"Agente CLS Cobranca\" em gen.aiknow.ai** ","height":340,"width":660,"color":4},"type":"n8n-nodes-base.stickyNote","position":[280,420],"typeVersion":1,"id":"4cd1652f-e327-4d79-a7e7-b85760bbe2f3","name":"Sticky Note"},{"parameters":{"mode":"retrieve-as-tool","toolName":"documents_cls_cobranca","toolDescription":"Use RAG to look up information in the knowledgebase.","tableName":{"__rl":true,"value":"documents_cls_cobranca","mode":"list","cachedResultName":"documents_cls_cobranca"},"options":{"queryName":"match_documents_cls_cobranca"}},"type":"@n8n/n8n-nodes-langchain.vectorStoreSupabase","typeVersion":1,"position":[-60,480],"id":"9f980c3e-25d1-43f4-9b52-6febb063c7d1","name":"Supabase Vector Store1","credentials":{"supabaseApi":{"id":"G46AB6gBuDDwnAl0","name":"Supabase account"}}},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.embeddingsOpenAi","typeVersion":1.2,"position":[40,640],"id":"cb1ea021-abc9-435d-adb4-da5ba9a3da3a","name":"Embeddings OpenAI2","credentials":{"openAiApi":{"id":"zkkZ6zxxQUr6SHw3","name":"OpenAi account"}}},{"parameters":{"content":"## RAG","height":400,"width":300,"color":3},"type":"n8n-nodes-base.stickyNote","position":[-80,420],"typeVersion":1,"id":"64b15e16-5d74-4989-ae63-2ad2af878f1c","name":"Sticky Note3"},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.toolCode","typeVersion":1.2,"position":[780,480],"id":"6e1b34c1-42ef-4c79-b40d-e52c9807a803","name":"AR Correio"}],"connections":{"List Documents":{"ai_tool":[[{"node":"MCP Server Trigger","type":"ai_tool","index":0}]]},"Query Document Rows":{"ai_tool":[[{"node":"MCP Server Trigger","type":"ai_tool","index":0}]]},"Gmail":{"ai_tool":[[{"node":"MCP Server Trigger","type":"ai_tool","index":0}]]},"SMS":{"ai_tool":[[{"node":"MCP Server Trigger","type":"ai_tool","index":0}]]},"WhatsApp":{"ai_tool":[[{"node":"MCP Server Trigger","type":"ai_tool","index":0}]]},"Embeddings OpenAI2":{"ai_embedding":[[{"node":"Supabase Vector Store1","type":"ai_embedding","index":0}]]},"Supabase Vector Store1":{"ai_tool":[[{"node":"MCP Server Trigger","type":"ai_tool","index":0}]]},"AR Correio":{"ai_tool":[[{"node":"MCP Server Trigger","type":"ai_tool","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{},"versionId":"aa41abef-0fa1-4304-ae10-665fc74dbfec","triggerCount":0,"shared":[{"createdAt":"2025-05-06T18:56:25.886Z","updatedAt":"2025-05-06T18:56:25.886Z","role":"workflow:owner","workflowId":"WEVQDvDib9HoMhQL","projectId":"JhhMk2N5VPm0i4dk","project":{"createdAt":"2025-04-14T16:51:56.472Z","updatedAt":"2025-04-14T16:55:53.829Z","id":"JhhMk2N5VPm0i4dk","name":"Marcelo  Silva  <marcelo@aiknow.ai>","type":"personal","icon":null,"description":null,"projectRelations":[{"createdAt":"2025-04-14T16:51:56.473Z","updatedAt":"2025-04-14T16:51:56.473Z","userId":"97bdbb38-16b6-4e00-a69e-95c7fc584e29","projectId":"JhhMk2N5VPm0i4dk","user":{"createdAt":"2025-04-14T16:51:56.336Z","updatedAt":"2025-11-02T13:47:05.000Z","id":"97bdbb38-16b6-4e00-a69e-95c7fc584e29","email":"marcelo@aiknow.ai","firstName":"Marcelo ","lastName":"Silva ","personalizationAnswers":{"version":"v4","personalization_survey_submitted_at":"2025-04-14T16:57:37.600Z","personalization_survey_n8n_version":"1.88.0","automationGoalDevops":["monitoring-alerting","data-syncing"],"companySize":"<20","companyType":"systems-integrator","role":"it","reportedSource":"google"},"settings":{"userActivated":true,"easyAIWorkflowOnboarded":true,"firstSuccessfulWorkflowId":"J6TjT2y82Fhq7Rf1","userActivatedAt":1744730169456,"npsSurvey":{"waitingForResponse":true,"ignoredCount":2,"lastShownAt":1761774996662}},"disabled":false,"mfaEnabled":false,"lastActiveAt":"2025-11-02","isPending":false}}]}}],"tags":[{"createdAt":"2025-05-06T18:24:04.592Z","updatedAt":"2025-05-06T18:24:04.592Z","id":"WHY2yDxy9zKfqFAJ","name":"CLS CobranÃ§a"}]}