{"createdAt":"2025-10-31T14:19:45.790Z","updatedAt":"2025-11-02T14:13:25.000Z","id":"MnXofnM2AKVRZx6A","name":"RAG Ingestion - Google Drive to Open WebUI (Melhorado)","active":false,"isArchived":false,"nodes":[{"parameters":{},"type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[-1088,288],"id":"41373033-1c7a-461e-a5ec-b3a8078d4411","name":"When clicking â€˜Execute workflowâ€™","disabled":true},{"parameters":{"method":"POST","url":"http://gen.aiknow.ai/api/v1/auths/signin","sendBody":true,"bodyParameters":{"parameters":[{"name":"email","value":"marcelo@aiknow.ai"},{"name":"password","value":"Prodam01@"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-880,288],"id":"e775caad-7af9-4bf6-ab51-92a8143cc99c","name":"get token openwebui"},{"parameters":{"pollTimes":{"item":[{"mode":"everyMinute"}]},"triggerOn":"specificFolder","folderToWatch":{"__rl":true,"value":"1DX9q_FHQm8B6HmyhB39HAVmv8TenfuRX","mode":"list","cachedResultName":"documents_n8n_pagos","cachedResultUrl":"https://drive.google.com/drive/folders/1DX9q_FHQm8B6HmyhB39HAVmv8TenfuRX"},"event":"fileCreated","options":{}},"id":"d223fdeb-6a3d-4957-9197-9f0d05ca30c5","name":"Google Drive Trigger","type":"n8n-nodes-base.googleDriveTrigger","typeVersion":1,"position":[-112,944],"credentials":{"googleDriveOAuth2Api":{"id":"1JROFpTvROyJ57cX","name":"Google Drive account"}},"disabled":true},{"parameters":{"jsCode":"const fileName = $input.item.json.name;\nconst parentFolderId = $input.item.json.parents?.[0] || '';\nconst driveUrl = $input.item.json.webViewLink;\nconst fileId = $input.item.json.id;\n\n// Mapeamento: Pasta â†’ KB\nconst folderMapping = {\n  'FOLDER_ID_PAGOS_ADM': {\n    kb_name: 'Empresa Pagos - ADM',\n    company: 'pagos',\n    department: 'adm'\n  },\n  'FOLDER_ID_PAGOS_VISA': {\n    kb_name: 'Empresa Pagos - VISA',\n    company: 'pagos',\n    department: 'visa'\n  },\n  'FOLDER_ID_AIKNOW_TI': {\n    kb_name: 'Empresa Aiknow - TI',\n    company: 'aiknow',\n    department: 'ti'\n  },\n  'FOLDER_ID_AIKNOW_COMERCIAL': {\n    kb_name: 'Empresa Aiknow - Comercial',\n    company: 'aiknow',\n    department: 'comercial'\n  }\n};\n\nconst config = folderMapping[parentFolderId] || {\n  kb_name: 'Shared',\n  company: 'shared',\n  department: 'general'\n};\n\nreturn {\n  json: {\n    file_id: fileId,\n    filename: fileName,\n    drive_url: driveUrl,\n    kb_name: config.kb_name,\n    company: config.company,\n    department: config.department\n  }\n};"},"id":"09bb2c6c-6914-45d4-acb3-f99f2295e7e7","name":"Determine Collection & KB","type":"n8n-nodes-base.code","typeVersion":2,"position":[192,640]},{"parameters":{"operation":"download","fileId":{"__rl":true,"value":"={{ $json.file_id }}","mode":"id"},"options":{}},"id":"0f17d818-0756-4e68-be5e-86aa6dd43511","name":"Download from Drive","type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[416,640],"credentials":{"googleDriveOAuth2Api":{"id":"mpJXFDBI4zjTUi3S","name":"Google drive Pagos"}}},{"parameters":{"jsCode":"const TOKEN = 'YOUR_JWT_TOKEN';\n\nconst kbName = $('Determine Collection & KB').item.json.kb_name;\nconst company = $('Determine Collection & KB').item.json.company;\nconst department = $('Determine Collection & KB').item.json.department;\n\n// Listar KBs usando $http (mÃ©todo nativo do n8n)\nconst listResponse = await this.helpers.request({\n  method: 'GET',\n  url: 'http://gen.aiknow.ai/api/v1/knowledge/list',\n  headers: {\n    'Authorization': `Bearer ${TOKEN}`\n  },\n  json: true\n});\n\nconst kbs = listResponse;\nlet kb = kbs.find(k => k.name === kbName);\n\n// Criar KB se nÃ£o existir\nif (!kb) {\n  console.log(`Criando KB: ${kbName}`);\n  \n  const createResponse = await this.helpers.request({\n    method: 'POST',\n    url: 'http://gen.aiknow.ai/api/v1/knowledge/create',\n    headers: {\n      'Authorization': `Bearer ${TOKEN}`,\n      'Content-Type': 'application/json'\n    },\n    body: {\n      name: kbName,\n      description: `Documentos ${department} da ${company}`\n    },\n    json: true\n  });\n  \n  kb = createResponse;\n  console.log(`KB criado: ${kb.id}`);\n} else {\n  console.log(`KB existe: ${kb.name} (${kb.id})`);\n}\n\nreturn {\n  json: {\n    kb_id: kb.id,\n    kb_name: kb.name,\n    kb_files: kb.files || []\n  }\n};"},"id":"2f510d16-45c8-4467-a271-b3f1336ca026","name":"Get or Create KB","type":"n8n-nodes-base.code","typeVersion":2,"position":[640,640]},{"parameters":{"method":"POST","url":"http://gen.aiknow.ai/api/v1/files","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendBody":true,"contentType":"multipart-form-data","bodyParameters":{"parameters":[{"name":"file","value":"data"}]},"options":{}},"id":"18be8126-6db2-4f06-87fd-1da808648a0c","name":"Upload File to Open WebUI","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1056,640],"credentials":{"httpHeaderAuth":{"id":"2pz48MoX64MQfnRG","name":"Openwebui_gen"}}},{"parameters":{"jsCode":"const TOKEN = 'SEU_TOKEN_AQUI';\nconst kbId = $('Get or Create KB').item.json.kb_id;\nconst kbFiles = $('Get or Create KB').item.json.kb_files;\nconst newFileName = $('Determine Collection & KB').item.json.filename;\nconst uploadedFileId = $input.item.json.id;\n\nconsole.log(`Verificando: ${newFileName}`);\n\n// Procurar arquivo existente\nconst existingFile = kbFiles.find(f => f.meta.name === newFileName);\n\nif (existingFile) {\n  console.log(`âš ï¸ Arquivo existe: ${existingFile.id}`);\n  console.log('Removendo...');\n  \n  // Remover do KB\n  await fetch(`http://open-webui:8080/api/v1/knowledge/${kbId}/file/remove`, {\n    method: 'POST',\n    headers: {\n      'Authorization': `Bearer ${TOKEN}`,\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ file_id: existingFile.id })\n  });\n  \n  // Remover vetores do Qdrant\n  await fetch('http://qdrant:6333/collections/openwebui_knowledge/points/delete', {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({\n      filter: {\n        must: [\n          { key: 'tenant_id', match: { value: kbId } },\n          { key: 'metadata.file_id', match: { value: existingFile.id } }\n        ]\n      }\n    })\n  });\n  \n  console.log('âœ… Removido');\n  await new Promise(r => setTimeout(r, 1000));\n}\n\nreturn {\n  json: {\n    kb_id: kbId,\n    file_id: uploadedFileId,\n    replaced: !!existingFile\n  }\n};"},"id":"6f32d04d-249f-47fa-9e11-587ee9e08cc7","name":"Check and Replace File","type":"n8n-nodes-base.code","typeVersion":2,"position":[1280,640]},{"parameters":{"method":"POST","url":"=http://open-webui:8080/api/v1/knowledge/{{ $json.kb_id }}/file/add","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendBody":true,"specifyBody":"json","jsonBody":"={{ JSON.stringify({ file_id: $json.file_id }) }}","options":{}},"id":"d5a62226-a28a-48d4-8b8b-b4fb8fa789fb","name":"Add File to KB","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1504,640]},{"parameters":{"jsCode":"const TOKEN = 'YOUR_JWT_TOKEN';\n\n// Pegar arquivo binÃ¡rio do node anterior\nconst binaryData = $input.item.binary.data;\nconst fileName = $('Download from Drive').item.json.name;\n\n// Criar FormData\nconst formData = {\n  file: {\n    value: binaryData,\n    options: {\n      filename: fileName,\n      contentType: binaryData.mimeType\n    }\n  }\n};\n\n// Fazer upload\nconst response = await this.helpers.request({\n  method: 'POST',\n  url: 'http://gen.aiknow.ai/api/v1/files',\n  headers: {\n    'Authorization': `Bearer ${TOKEN}`\n  },\n  formData: formData,\n  json: true\n});\n\nreturn {\n  json: response\n};"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[848,640],"id":"769c4a08-0b1e-4be5-9db9-5d6fe3c4a8c5","name":"Code in JavaScript"},{"parameters":{"assignments":{"assignments":[{"id":"549419f3-f6b9-4017-9094-332d146f3dc9","name":"id","value":"={{ $json.id }}","type":"string"},{"id":"1433dbf3-da49-4fe3-a8d7-7eb9f3b554cd","name":"originalFilename","value":"={{ $json.originalFilename }}","type":"string"},{"id":"376f785a-f537-4fa7-a782-775f317a3e9d","name":"mimeType","value":"={{ $json.mimeType }}","type":"string"},{"id":"d23d7154-32ad-4be9-8036-7cddce1c3fa4","name":"link_arquivo_drive","value":"={{ $json.webViewLink }}","type":"string"},{"id":"fbf55f82-c8f3-4033-9388-e4084463dc5d","name":"token","value":"YOUR_JWT_TOKEN","type":"string"},{"id":"2436931d-0a64-4c9c-8723-7f0b3989b7a7","name":"tenant_id","value":"8a713548-57d5-408a-95d6-73940c5be617","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[192,944],"id":"ffbb4b26-32af-4d7e-b35d-bbcec0a5e949","name":"Get IDs file drive"},{"parameters":{"operation":"download","fileId":{"__rl":true,"value":"={{ $json.id }}","mode":"id"},"options":{}},"type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[448,944],"id":"616dcdad-70c8-4b46-90e4-1763844663cf","name":"Download file","credentials":{"googleDriveOAuth2Api":{"id":"1JROFpTvROyJ57cX","name":"Google Drive account"}}},{"parameters":{"method":"DELETE","url":"=http://100.114.232.89:5000/api/v1/knowledge/{{ $json.id }}/delete","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"=Bearer {{ $('get token openwebui').item.json.token }}"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-32,288],"id":"37c5a778-a0aa-48be-bc25-914028ad099e","name":"Deletar base de conhecimento"},{"parameters":{"url":"http://100.114.232.89:5000/api/v1/knowledge/list","authentication":"genericCredentialType","genericAuthType":"httpBearerAuth","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-608,288],"id":"a37e0ad7-cb3a-47c4-aa37-54d10d062e36","name":"Listar base conhecimento","credentials":{"httpBearerAuth":{"id":"mHCc2jOP5LjYZvPK","name":"OW_Bearer"}}},{"parameters":{"method":"POST","url":"http://100.114.232.89:5000/api/v1/knowledge/create","authentication":"genericCredentialType","genericAuthType":"httpBearerAuth","sendBody":true,"bodyParameters":{"parameters":[{"name":"name","value":"BaseTeste"},{"name":"description","value":"Base de conhecimento para testes"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-608,496],"id":"9ae65950-8dbe-42e3-ad08-2058aec7c18d","name":"Criar base de conhecimento","credentials":{"httpBearerAuth":{"id":"mHCc2jOP5LjYZvPK","name":"OW_Bearer"}}},{"parameters":{"assignments":{"assignments":[{"id":"115c8324-9290-45a4-897d-ae69abf3358b","name":"id","value":"={{ $json.id }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-336,288],"id":"55ac3ba6-5d4e-4ef6-9b77-463629da2cff","name":"Pega Ids de conhecimento"},{"parameters":{"method":"POST","url":"http://100.114.232.89:5000/api/v1/files/","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"=Bearer {{ $json.token }}"},{"name":"Accept","value":"application/json"}]},"sendBody":true,"contentType":"multipart-form-data","bodyParameters":{"parameters":[{"parameterType":"formBinaryData","name":"file","inputDataFieldName":"data"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[720,944],"id":"7876cb49-afe2-46fe-b7ac-2cde5c56c421","name":"Post de arquivo no openwebui"},{"parameters":{"dataTableId":{"__rl":true,"value":"fj1aaQgig6rnUZq6","mode":"list","cachedResultName":"Tabela temporaria","cachedResultUrl":"/projects/JhhMk2N5VPm0i4dk/datatables/fj1aaQgig6rnUZq6"},"columns":{"mappingMode":"defineBelow","value":{"id_arquivo_ow":"={{ $json.id }}","id_arquivo_drive":"={{ $('Get IDs file drive').item.json.id }}","tenant_id":"={{ $('Get IDs file drive').item.json.tenant_id }}","kb_name":"={{ $json.name }}","name_aquivo_drive":"={{ $json.files[0].meta.name }}","mime_type":"={{ $json.files[0].meta.content_type }}"},"matchingColumns":[],"schema":[{"id":"tenant_id","displayName":"tenant_id","required":false,"defaultMatch":false,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"kb_name","displayName":"kb_name","required":false,"defaultMatch":false,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"id_arquivo_drive","displayName":"id_arquivo_drive","required":false,"defaultMatch":false,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"id_arquivo_ow","displayName":"id_arquivo_ow","required":false,"defaultMatch":false,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"name_aquivo_drive","displayName":"name_aquivo_drive","required":false,"defaultMatch":false,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"mime_type","displayName":"mime_type","required":false,"defaultMatch":false,"display":true,"type":"string","readOnly":false,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.dataTable","typeVersion":1,"position":[1296,944],"id":"77976ef8-f02b-43fe-9f27-b989b35d25c1","name":"tabela_temporaria"},{"parameters":{"method":"POST","url":"http://100.114.232.89:5000/api/v1/knowledge/8a713548-57d5-408a-95d6-73940c5be617/file/add","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"=Bearer {{ $('Get IDs file drive').item.json.token }}"}]},"sendBody":true,"bodyParameters":{"parameters":[{"name":"file_id","value":"={{ $json.id }}"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1024,944],"id":"6116dadb-47b4-44d9-b25b-ac57fde568ba","name":"Post do arquivo na base de conhecimento"},{"parameters":{"jsCode":"const TOKEN = $('Get IDs file drive1').item.json.token;\nconst TENANT_ID = $('Get IDs file drive1').item.json.tenant_id;\nconst uploadedFileId = $input.item.json.id;\nconst fileName = $input.item.json.meta.name;\n\nconsole.log('â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—');\nconsole.log('â•‘         CHECK DUPLICATE - INICIANDO                    â•‘');\nconsole.log('â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');\nconsole.log(`ğŸ“„ Arquivo: ${fileName}`);\nconsole.log(`ğŸ“¤ File ID (novo): ${uploadedFileId}`);\nconsole.log(`ğŸ“¦ Tenant ID: ${TENANT_ID}`);\n\ntry {\n  // Buscar KB atual para verificar arquivos existentes\n  console.log('\\nğŸ” Buscando informaÃ§Ãµes do KB...');\n  \n  const kbListResponse = await this.helpers.request({\n    method: 'GET',\n    url: 'http://100.114.232.89:5000/api/v1/knowledge/list',\n    headers: {\n      'Authorization': `Bearer ${TOKEN}`\n    },\n    json: true\n  });\n\n  const currentKB = kbListResponse.find(kb => kb.id === TENANT_ID);\n\n  if (!currentKB) {\n    console.log('âš ï¸  KB nÃ£o encontrado!');\n    console.log(`   Tenant ID procurado: ${TENANT_ID}`);\n    \n    return {\n      json: {\n        file_id: uploadedFileId,\n        replaced: false,\n        status: 'kb_not_found',\n        warning: 'Knowledge Base nÃ£o encontrado'\n      }\n    };\n  }\n\n  console.log(`âœ… KB encontrado: ${currentKB.name}`);\n  console.log(`   Total de arquivos no KB: ${currentKB.files?.length || 0}`);\n\n  // Procurar arquivo com mesmo nome\n  const existingFile = currentKB.files?.find(f => f.meta.name === fileName);\n\n  if (existingFile && existingFile.id !== uploadedFileId) {\n    console.log('\\nâš ï¸  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');\n    console.log('   DUPLICATA DETECTADA!');\n    console.log('   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');\n    console.log(`   Arquivo antigo ID: ${existingFile.id}`);\n    console.log(`   Arquivo novo ID: ${uploadedFileId}`);\n    console.log('\\nğŸ—‘ï¸  Iniciando remoÃ§Ã£o da versÃ£o antiga...');\n    \n    try {\n      // 1. Remover arquivo antigo do KB\n      console.log('   [1/3] Removendo do Knowledge Base...');\n      \n      await this.helpers.request({\n        method: 'POST',\n        url: `http://100.114.232.89:5000/api/v1/knowledge/${TENANT_ID}/file/remove`,\n        headers: {\n          'Authorization': `Bearer ${TOKEN}`,\n          'Content-Type': 'application/json'\n        },\n        body: {\n          file_id: existingFile.id\n        },\n        json: true\n      });\n      \n      console.log('   âœ… Removido do KB com sucesso');\n      \n      // 2. Remover vetores antigos do Qdrant\n      console.log('   [2/3] Removendo vetores do Qdrant...');\n      \n      const qdrantResponse = await this.helpers.request({\n        method: 'POST',\n        url: 'http://qdrant:6333/collections/openwebui_knowledge/points/delete',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: {\n          filter: {\n            must: [\n              { key: 'tenant_id', match: { value: TENANT_ID } },\n              { key: 'metadata.file_id', match: { value: existingFile.id } }\n            ]\n          }\n        },\n        json: true\n      });\n      \n      console.log('   âœ… Vetores removidos do Qdrant');\n      console.log(`   Resultado: ${JSON.stringify(qdrantResponse.result || qdrantResponse)}`);\n      \n      // 3. Aguardar processamento\n      console.log('   [3/3] Aguardando processamento (1.5s)...');\n      await new Promise(resolve => setTimeout(resolve, 1500));\n      \n      console.log('\\nâœ… â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');\n      console.log('   DUPLICATA REMOVIDA COM SUCESSO!');\n      console.log('   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\\n');\n      \n      return {\n        json: {\n          file_id: uploadedFileId,\n          replaced: true,\n          old_file_id: existingFile.id,\n          status: 'duplicate_replaced',\n          message: 'Arquivo substituÃ­do com sucesso'\n        }\n      };\n      \n    } catch (error) {\n      console.log('\\nâŒ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');\n      console.log('   ERRO AO REMOVER DUPLICATA');\n      console.log('   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');\n      console.log(`   Erro: ${error.message}`);\n      console.log(`   Stack: ${error.stack}`);\n      console.log('   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\\n');\n      \n      // Mesmo com erro, continuar com o novo arquivo\n      return {\n        json: {\n          file_id: uploadedFileId,\n          replaced: false,\n          status: 'duplicate_removal_failed',\n          error: error.message,\n          warning: 'Erro ao remover duplicata, mas novo arquivo serÃ¡ processado'\n        }\n      };\n    }\n  }\n\n  console.log('\\nâœ… Nenhuma duplicata encontrada');\n  console.log('   Arquivo Ã© novo no Knowledge Base\\n');\n\n  return {\n    json: {\n      file_id: uploadedFileId,\n      replaced: false,\n      status: 'new_file',\n      message: 'Arquivo novo adicionado'\n    }\n  };\n  \n} catch (error) {\n  console.log('\\nâŒ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');\n  console.log('   ERRO GERAL NO CHECK DUPLICATE');\n  console.log('   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');\n  console.log(`   Erro: ${error.message}`);\n  console.log(`   Stack: ${error.stack}`);\n  console.log('   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\\n');\n  \n  // Em caso de erro geral, continuar com o workflow\n  return {\n    json: {\n      file_id: uploadedFileId || $input.item.json.id,\n      replaced: false,\n      status: 'check_failed',\n      error: error.message,\n      warning: 'VerificaÃ§Ã£o de duplicata falhou, mas workflow continuarÃ¡'\n    }\n  };\n}"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[256,-560],"id":"864ab101-bbf6-4053-8267-a39edab4b1f9","name":"Check Duplicate"},{"parameters":{"pollTimes":{"item":[{"mode":"everyMinute"}]},"triggerOn":"specificFolder","folderToWatch":{"__rl":true,"value":"1DX9q_FHQm8B6HmyhB39HAVmv8TenfuRX","mode":"list","cachedResultName":"documents_n8n_pagos","cachedResultUrl":"https://drive.google.com/drive/folders/1DX9q_FHQm8B6HmyhB39HAVmv8TenfuRX"},"event":"fileCreated","options":{}},"id":"730969a4-860d-4bc6-a077-d06151fd9030","name":"Google Drive Trigger1","type":"n8n-nodes-base.googleDriveTrigger","typeVersion":1,"position":[-848,-560],"credentials":{"googleDriveOAuth2Api":{"id":"1JROFpTvROyJ57cX","name":"Google Drive account"}}},{"parameters":{"assignments":{"assignments":[{"id":"549419f3-f6b9-4017-9094-332d146f3dc9","name":"id","value":"={{ $json.id }}","type":"string"},{"id":"1433dbf3-da49-4fe3-a8d7-7eb9f3b554cd","name":"originalFilename","value":"={{ $json.name }}","type":"string"},{"id":"376f785a-f537-4fa7-a782-775f317a3e9d","name":"mimeType","value":"={{ $json.mimeType }}","type":"string"},{"id":"d23d7154-32ad-4be9-8036-7cddce1c3fa4","name":"link_arquivo_drive","value":"={{ $json.webViewLink }}","type":"string"},{"id":"fbf55f82-c8f3-4033-9388-e4084463dc5d","name":"token","value":"YOUR_JWT_TOKEN","type":"string"},{"id":"2436931d-0a64-4c9c-8723-7f0b3989b7a7","name":"tenant_id","value":"8a713548-57d5-408a-95d6-73940c5be617","type":"string"},{"id":"workflow-timestamp","name":"workflow_start_time","value":"={{ $now.toISO() }}","type":"string"},{"id":"file-size-calc","name":"file_size_kb","value":"={{ Math.round(($json.size || 0) / 1024) }}","type":"number"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-400,-560],"id":"d09a816b-d9e5-4c42-9054-9188f0db54fb","name":"Get IDs file drive1"},{"parameters":{"operation":"download","fileId":{"__rl":true,"value":"={{ $json.id }}","mode":"id"},"options":{}},"type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[-176,-560],"id":"e9e591e9-73c3-46f9-9510-865cccd8b28c","name":"Download file1","credentials":{"googleDriveOAuth2Api":{"id":"1JROFpTvROyJ57cX","name":"Google Drive account"}}},{"parameters":{"method":"POST","url":"http://100.114.232.89:5000/api/v1/files/","authentication":"genericCredentialType","genericAuthType":"httpBearerAuth","sendBody":true,"contentType":"multipart-form-data","bodyParameters":{"parameters":[{"parameterType":"formBinaryData","name":"file","inputDataFieldName":"data"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[48,-560],"id":"a6db8402-dd30-42c8-9598-b2002a065e2d","name":"Post de arquivo no openwebui1","credentials":{"httpHeaderAuth":{"id":"2pz48MoX64MQfnRG","name":"Openwebui_gen"},"httpBearerAuth":{"id":"mHCc2jOP5LjYZvPK","name":"OW_Bearer"}}},{"parameters":{"method":"POST","url":"=http://100.114.232.89:5000/api/v1/knowledge/{{ $('Get IDs file drive1').item.json.tenant_id }}/file/add","authentication":"genericCredentialType","genericAuthType":"httpBearerAuth","sendBody":true,"specifyBody":"json","jsonBody":"={{ { \"file_id\": $('Check Duplicate').item.json.file_id } }}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[480,-560],"id":"9bcbecde-e3a6-4177-bc9b-d01eef071d58","name":"Post do arquivo na base de conhecimento1","credentials":{"httpHeaderAuth":{"id":"2pz48MoX64MQfnRG","name":"Openwebui_gen"},"httpBearerAuth":{"id":"mHCc2jOP5LjYZvPK","name":"OW_Bearer"}}},{"parameters":{"dataTableId":{"__rl":true,"value":"fj1aaQgig6rnUZq6","mode":"list","cachedResultName":"Tabela temporaria","cachedResultUrl":"/projects/JhhMk2N5VPm0i4dk/datatables/fj1aaQgig6rnUZq6"},"columns":{"mappingMode":"defineBelow","value":{"id_arquivo_ow":"={{ $('Check Duplicate').item.json.file_id }}","id_arquivo_drive":"={{ $('Get IDs file drive1').item.json.id }}","tenant_id":"={{ $('Get IDs file drive1').item.json.tenant_id }}","kb_name":"={{ $json.name }}","mime_type":"={{ $('Post de arquivo no openwebui1').item.json.meta.content_type }}","name_arquivo_drive":"={{ $('Download file1').item.json.originalFilename }}","is_duplicate":"={{ $('Check Duplicate').item.json.replaced }}","message":"={{ $('Check Duplicate').item.json.message }}","old_file_id":"={{ $('Check Duplicate').item.json.old_file_id }}","status":"={{ $('Check Duplicate').item.json.status }}","user_id":"={{ $json.user_id }}","file_size_kb":"={{ $('Get IDs file drive1').item.json.file_size_kb }}","workflow_start":"={{ $('Get IDs file drive1').item.json.workflow_start_time }}","link_drive":"={{ $('Get IDs file drive1').item.json.link_arquivo_drive }}","kb_description":"={{ $json.description }}","file_hash":"={{ $json.files[0].hash }}","file_path":"={{ $('Post de arquivo no openwebui1').item.json.path }}","processed_at":"={{ $now.toISO()}}","kb_updated":"={{ $('Post do arquivo na base de conhecimento1').item.json.updated_at }}","upload_completed":"={{ $('Post de arquivo no openwebui1').item.json.created_at }}","processing_time_sec":"={{ Math.round(($now.toMillis() - new Date($('Get IDs file drive1').item.json.workflow_start_time).getTime()) / 1000) }}","kb_created_date":"={{ $('Post do arquivo na base de conhecimento1').item.json.created_at }}","total_files_kb":"={{ $('Post do arquivo na base de conhecimento1').item.json.files.length }}","file_size_bytes":"={{ $('Post de arquivo no openwebui1').item.json.meta.size }}"},"matchingColumns":[],"schema":[{"id":"name_arquivo_drive","displayName":"name_arquivo_drive","required":false,"defaultMatch":false,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"id_arquivo_ow","displayName":"id_arquivo_ow","required":false,"defaultMatch":false,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"id_arquivo_drive","displayName":"id_arquivo_drive","required":false,"defaultMatch":false,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"tenant_id","displayName":"tenant_id","required":false,"defaultMatch":false,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"kb_name","displayName":"kb_name","required":false,"defaultMatch":false,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"user_id","displayName":"user_id","required":false,"defaultMatch":false,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"status","displayName":"status","required":false,"defaultMatch":false,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"is_duplicate","displayName":"is_duplicate","required":false,"defaultMatch":false,"display":true,"type":"boolean","readOnly":false,"removed":false},{"id":"message","displayName":"message","required":false,"defaultMatch":false,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"old_file_id","displayName":"old_file_id","required":false,"defaultMatch":false,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"mime_type","displayName":"mime_type","required":false,"defaultMatch":false,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"file_size_kb","displayName":"file_size_kb","required":false,"defaultMatch":false,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"file_size_bytes","displayName":"file_size_bytes","required":false,"defaultMatch":false,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"file_hash","displayName":"file_hash","required":false,"defaultMatch":false,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"link_drive","displayName":"link_drive","required":false,"defaultMatch":false,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"kb_description","displayName":"kb_description","required":false,"defaultMatch":false,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"total_files_kb","displayName":"total_files_kb","required":false,"defaultMatch":false,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"kb_created_date","displayName":"kb_created_date","required":false,"defaultMatch":false,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"processing_time_sec","displayName":"processing_time_sec","required":false,"defaultMatch":false,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"file_path","displayName":"file_path","required":false,"defaultMatch":false,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"workflow_start","displayName":"workflow_start","required":false,"defaultMatch":false,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"upload_completed","displayName":"upload_completed","required":false,"defaultMatch":false,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"kb_updated","displayName":"kb_updated","required":false,"defaultMatch":false,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"processed_at","displayName":"processed_at","required":false,"defaultMatch":false,"display":true,"type":"string","readOnly":false,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.dataTable","typeVersion":1,"position":[704,-560],"id":"c3af1bc6-06d9-4337-86cf-10f5369d160a","name":"tabela_temporaria1"},{"parameters":{"content":"## Teste de API Openwebui \n","height":704,"width":1264},"type":"n8n-nodes-base.stickyNote","position":[-1120,112],"typeVersion":1,"id":"c7bf2657-34e1-4189-bccd-b0cf3fd79c61","name":"Sticky Note"},{"parameters":{"method":"POST","url":"=http://100.114.232.89:5000/api/v1/knowledge/{{ $json.id }}/file/add","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"=Bearer {{ $('get token openwebui').item.json.token }}"}]},"sendBody":true,"bodyParameters":{"parameters":[{"name":"file_id","value":"<ID-DO-ARQUIVO>"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-336,496],"id":"694ddb58-aa59-42d1-bb92-711e7bb4c698","name":"Post arquivo no openwebui"},{"parameters":{"content":"## IngestÃ£o de dados 2.0","height":304,"width":1792,"color":3},"type":"n8n-nodes-base.stickyNote","position":[-896,-656],"typeVersion":1,"id":"e194b9d6-d5f4-43e2-844e-02ca3fe846c2","name":"Sticky Note2"},{"parameters":{"constantsKeyName":"constantes"},"type":"n8n-nodes-globals.globalConstants","typeVersion":1,"position":[-864,-304],"id":"c8fd02c8-3cd0-4d18-bb7e-7253eed2146a","name":"Global Constants","credentials":{"globalConstantsApi":{"id":"pazvJIrJkG4UCGgj","name":"Global Constants account"}},"disabled":true},{"parameters":{"options":{}},"type":"n8n-nodes-base.splitInBatches","typeVersion":3,"position":[-624,-608],"id":"a3ea93c2-62ae-4174-a2d5-b065528c6655","name":"Loop Over Items"}],"connections":{"When clicking â€˜Execute workflowâ€™":{"main":[[{"node":"get token openwebui","type":"main","index":0}]]},"get token openwebui":{"main":[[{"node":"Listar base conhecimento","type":"main","index":0},{"node":"Criar base de conhecimento","type":"main","index":0}]]},"Google Drive Trigger":{"main":[[{"node":"Get IDs file drive","type":"main","index":0}]]},"Determine Collection & KB":{"main":[[{"node":"Download from Drive","type":"main","index":0}]]},"Download from Drive":{"main":[[{"node":"Get or Create KB","type":"main","index":0}]]},"Get or Create KB":{"main":[[{"node":"Code in JavaScript","type":"main","index":0}]]},"Upload File to Open WebUI":{"main":[[{"node":"Check and Replace File","type":"main","index":0}]]},"Check and Replace File":{"main":[[{"node":"Add File to KB","type":"main","index":0}]]},"Code in JavaScript":{"main":[[{"node":"Upload File to Open WebUI","type":"main","index":0}]]},"Get IDs file drive":{"main":[[{"node":"Download file","type":"main","index":0}]]},"Download file":{"main":[[{"node":"Post de arquivo no openwebui","type":"main","index":0}]]},"Listar base conhecimento":{"main":[[{"node":"Pega Ids de conhecimento","type":"main","index":0}]]},"Pega Ids de conhecimento":{"main":[[{"node":"Deletar base de conhecimento","type":"main","index":0}]]},"Criar base de conhecimento":{"main":[[{"node":"Post arquivo no openwebui","type":"main","index":0}]]},"Post de arquivo no openwebui":{"main":[[{"node":"Post do arquivo na base de conhecimento","type":"main","index":0}]]},"Post do arquivo na base de conhecimento":{"main":[[{"node":"tabela_temporaria","type":"main","index":0}]]},"Check Duplicate":{"main":[[{"node":"Post do arquivo na base de conhecimento1","type":"main","index":0}]]},"Google Drive Trigger1":{"main":[[{"node":"Loop Over Items","type":"main","index":0}]]},"Get IDs file drive1":{"main":[[{"node":"Download file1","type":"main","index":0}]]},"Download file1":{"main":[[{"node":"Post de arquivo no openwebui1","type":"main","index":0}]]},"Post de arquivo no openwebui1":{"main":[[{"node":"Check Duplicate","type":"main","index":0}]]},"Post do arquivo na base de conhecimento1":{"main":[[{"node":"tabela_temporaria1","type":"main","index":0}]]},"Global Constants":{"main":[[]]},"Loop Over Items":{"main":[[],[{"node":"Get IDs file drive1","type":"main","index":0}]]},"tabela_temporaria1":{"main":[[{"node":"Loop Over Items","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{"get token openwebui":[{"json":{"id":"04d3ad02-4de0-4dc8-8337-d688d33237ff","email":"marcelo@aiknow.ai","name":"Marcelo LourenÃ§o Da Silva","role":"admin","profile_image_url":"data:image/png;base64,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","token":"YOUR_JWT_TOKEN","token_type":"Bearer","expires_at":1764382684,"permissions":{"workspace":{"models":false,"knowledge":false,"prompts":false,"tools":false},"sharing":{"public_models":false,"public_knowledge":false,"public_prompts":false,"public_tools":false,"public_notes":false},"chat":{"controls":true,"valves":true,"system_prompt":true,"params":true,"file_upload":true,"delete":true,"delete_message":true,"continue_response":true,"regenerate_response":true,"rate_response":true,"edit":true,"share":true,"export":true,"stt":true,"tts":true,"call":true,"multiple_models":true,"temporary":true,"temporary_enforced":false},"features":{"direct_tool_servers":false,"web_search":true,"image_generation":false,"code_interpreter":false,"notes":false}}}}],"Criar base de conhecimento":[{"json":{"id":"8a713548-57d5-408a-95d6-73940c5be617","user_id":"04d3ad02-4de0-4dc8-8337-d688d33237ff","name":"BaseTeste","description":"Base de conhecimento para testes","data":null,"meta":null,"access_control":null,"created_at":1762027270,"updated_at":1762027270,"files":null}}]},"versionId":"edb65834-5637-40c9-b6b1-493ea6370e61","triggerCount":0,"shared":[{"createdAt":"2025-10-31T14:19:45.793Z","updatedAt":"2025-10-31T14:19:45.793Z","role":"workflow:owner","workflowId":"MnXofnM2AKVRZx6A","projectId":"JhhMk2N5VPm0i4dk","project":{"createdAt":"2025-04-14T16:51:56.472Z","updatedAt":"2025-04-14T16:55:53.829Z","id":"JhhMk2N5VPm0i4dk","name":"Marcelo  Silva  <marcelo@aiknow.ai>","type":"personal","icon":null,"description":null,"projectRelations":[{"createdAt":"2025-04-14T16:51:56.473Z","updatedAt":"2025-04-14T16:51:56.473Z","userId":"97bdbb38-16b6-4e00-a69e-95c7fc584e29","projectId":"JhhMk2N5VPm0i4dk","user":{"createdAt":"2025-04-14T16:51:56.336Z","updatedAt":"2025-11-02T13:47:05.000Z","id":"97bdbb38-16b6-4e00-a69e-95c7fc584e29","email":"marcelo@aiknow.ai","firstName":"Marcelo ","lastName":"Silva ","personalizationAnswers":{"version":"v4","personalization_survey_submitted_at":"2025-04-14T16:57:37.600Z","personalization_survey_n8n_version":"1.88.0","automationGoalDevops":["monitoring-alerting","data-syncing"],"companySize":"<20","companyType":"systems-integrator","role":"it","reportedSource":"google"},"settings":{"userActivated":true,"easyAIWorkflowOnboarded":true,"firstSuccessfulWorkflowId":"J6TjT2y82Fhq7Rf1","userActivatedAt":1744730169456,"npsSurvey":{"waitingForResponse":true,"ignoredCount":2,"lastShownAt":1761774996662}},"disabled":false,"mfaEnabled":false,"lastActiveAt":"2025-11-02","isPending":false}}]}}],"tags":[]}