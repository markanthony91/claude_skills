#!/bin/bash
################################################################################
# Inspetor Visual de CÃ¢meras - Wrapper Script
# Facilita a inspeÃ§Ã£o visual de cÃ¢meras P1/P2/P3
################################################################################

SCRIPT_DIR="/home/marcelo/sistemas"
INSPECTOR="$SCRIPT_DIR/inspect_cameras_visual.py"

# Colors
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

show_help() {
    cat << EOF
${BLUE}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}
${GREEN}INSPETOR VISUAL DE CÃ‚MERAS${NC}
${BLUE}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}

${YELLOW}USO:${NC}

  ./inspecionar                              # Todas as lojas (resumo)
  ./inspecionar problemas                    # Apenas lojas com problemas
  ./inspecionar loja "Nome_da_Loja"          # Loja especÃ­fica
  ./inspecionar help                         # Esta ajuda

${YELLOW}EXEMPLOS:${NC}

  ./inspecionar problemas
  ./inspecionar loja "Marginal_Tiete_Pte_Anhanguera"
  ./inspecionar loja "BH_Andre_Cavalcanti"

${YELLOW}INTERPRETAÃ‡ÃƒO DOS ÃCONES:${NC}

  ğŸŸ¢ Verde    = OK (desvio < 20%)
  ğŸŸ¡ Amarelo  = AtenÃ§Ã£o (desvio 20-40%)
  ğŸŸ  Laranja  = Alto (desvio 40-60%)
  ğŸ”´ Vermelho = CrÃ­tico (desvio > 60%)

${YELLOW}POSIÃ‡Ã•ES DAS CÃ‚MERAS:${NC}

  P1 = Menu (Ã¡rea de pedidos)
  P2 = Pagamento (caixa)
  P3 = Retirada (entrega do pedido)

${BLUE}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}
EOF
}

# Check arguments
if [ "$1" = "help" ] || [ "$1" = "--help" ] || [ "$1" = "-h" ]; then
    show_help
    exit 0
fi

if [ "$1" = "problemas" ]; then
    echo -e "${YELLOW}ğŸ” Analisando apenas lojas com problemas...${NC}\n"
    python3 "$INSPECTOR" --problems-only

elif [ "$1" = "loja" ]; then
    if [ -z "$2" ]; then
        echo -e "${RED}âŒ Erro: Especifique o nome da loja${NC}"
        echo "Uso: ./inspecionar loja \"Nome_da_Loja\""
        exit 1
    fi

    echo -e "${YELLOW}ğŸ” Inspecionando loja: $2${NC}\n"
    python3 "$INSPECTOR" --store "$2"

else
    echo -e "${YELLOW}ğŸ” Analisando todas as lojas (exibindo top 20)...${NC}\n"
    python3 "$INSPECTOR"
fi
